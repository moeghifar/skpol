function remove_table_produk(t){$("#tbl-produk-container .tbl-tr-"+t).remove()}function validate_not_empty(t){var a=$.trim(t);return""==a||a.length<1||"undefined"==typeof t?!1:!0}function count_flag_prevent(t){var a=t.length;if(0!=a){var n=t.attr("placeholder");return notifError("Peringatan!",n+" Belum Diisi"),!1}return!0}function duplicateProduk(){var t=$("#container-produk").html(),a='<span id="clone-produk-'+prdk+'"><hr/><p><a onclick="removeDuplicate('+prdk+')" class="btn btn-danger btn-xs"><i class="ico ico-remove"></i> Hapus form tambah produk</a></p>'+t+"</span>";$("#container-produk").parent().append(a),prdk++}function removeDuplicate(t){var a="#clone-produk-"+t;$(a).remove()}function addKota(){var t='<div id="inputKota'+yk+'" class="input-group add-on mb10" style="padding-top: 2px;"><input required class="form-control" placeholder="Tujuan Pemasaran Domestik (kota)" name="kota[]" type="text"><div class="input-group-btn"><button class="btn btn-default" id="inputKota'+yk+'" onclick="removeInputKota('+yk+')"><i class="ico ico-remove"></i></button></div></div>';$("#formKota").append(t),yk++}function removeInputKota(t){var a="#inputKota"+t;$("#formKota "+a).remove()}function addNegara(){var t='<div id="inputNegara'+yn+'" class="input-group add-on mb10" style="padding-top: 2px;"><input required class="form-control" placeholder="Tujuan Pemasaran Mancanegara (negara)" name="negara[]" type="text"><div class="input-group-btn"><button class="btn btn-default" id="inputNegara'+yn+'" onclick="removeInputNegara('+yn+')"><i class="ico ico-remove"></i></button></div></div>';$("#formNegara").append(t),yn++}function removeInputNegara(t){var a="#inputNegara"+t;$("#formNegara "+a).remove()}function addTangkap(){var t='<div id="inputJenis'+ytangkapan+'" class="row"><div class="col-sm-4"><input required group-field="tangkapan'+ytangkapan+'" type="text" class="form-control mb10" placeholder="Asal Wilayah" name="t_asal[]"></input></div><div class="col-sm-4"><input required group-field="tangkapan'+ytangkapan+'" type="text" class="form-control mb10" placeholder="Jenis Ikan" name="t_jenis[]"></input></div><div class="col-sm-4"><div required class="input-group add-on"><input group-field="tangkapan'+ytangkapan+'" placeholder="Bentuk Ikan" class="form-control" name="t_bentuk[]" id="inputBentuk'+ytangkapan+'" type="text"><div class="input-group-btn"><button class="btn btn-default" id="inputBentuk'+ytangkapan+'" onclick="removeInputTangkap('+ytangkapan+')"><i class="ico ico-remove"></i></button></div></div></div></div>';$("#formTangkap").append(t),ytangkapan++}function removeInputTangkap(t){var a="#inputJenis"+t,n="#inputBentuk"+t;$("#formTangkap "+a).remove(),$("#formTangkap "+n).remove()}function addBudidaya(){var t='<div id="inputJenis'+ybud+'" class="row"><div class="col-sm-4"><input required group-field="budidaya'+ybud+'" type="text" class="form-control mb10" placeholder="Asal Wilayah" name="b_asal[]" ></input></div><div class="col-sm-4"><input required group-field="budidaya'+ybud+'" type="text" class="form-control mb10" placeholder="Jenis Ikan" name="b_jenis[]" ></input></div><div class="col-sm-4"><div class="input-group add-on"><input required group-field="budidaya'+ybud+'" placeholder="Bentuk Ikan" class="form-control" name="b_bentuk[]" id="inputBentuk'+ybud+'" type="text"><div class="input-group-btn"><button class="btn btn-default" id="inputBentuk'+ybud+'" onclick="removeInputBudidaya('+ybud+')"><i class="ico ico-remove"></i></button></div></div></div></div>';$("#formBudidaya").append(t),ybud++}function removeInputBudidaya(t){var a="#inputJenis"+t,n="#inputBentuk"+t;$("#formBudidaya "+a).remove(),$("#formBudidaya "+n).remove()}function addImport(){var t='<div id="inputJenis'+yim+'" class="row"><div class="col-sm-4"><input required group-field="import'+yim+'" type="text" class="form-control mb10" placeholder="Asal Wilayah" name="i_asal[]"></input></div><div class="col-sm-4"><input required group-field="import'+yim+'" type="text" class="form-control mb10" placeholder="Jenis Ikan" name="i_jenis[]"></input></div><div class="col-sm-4"><div class="input-group add-on"><input required group-field="import'+yim+'" placeholder="Bentuk Ikan" class="form-control" name="i_bentuk[]" id="inputBentuk'+yim+'" type="text"><div class="input-group-btn"><button class="btn btn-default" id="inputBentuk'+yim+'" onclick="removeInputImport('+yim+')"><i class="ico ico-remove"></i></button></div></div></div></div>';$("#formImport").append(t),yim++}function removeInputImport(t){var a="#inputJenis"+t,n="#inputBentuk"+t;$("#formImport "+a).remove(),$("#formImport "+n).remove()}function addSni(){var t='<div id="inputSni'+ysni+'" class="input-group add-on mb10"><input required class="form-control" name="sni['+ysni+']" type="text" placeholder="SNI / ISO / BRC / HACCP / SKP / Standar Lain" required><div class="input-group-btn"><button class="btn btn-default" id="inputSni'+ysni+'" onclick="removeInputSni('+ysni+')" type="submit"><i class="ico ico-remove"></i></button></div></div>';$("#formSni").append(t),ysni++}function removeInputSni(t){var a="#inputSni"+t;$("#formSni "+a).remove()}function addLainnya(){var t='<div id="inputLainnya'+yl+'" class="row mb10"><div class="col-sm-4"><input group-field="lainnya'+yl+'" type="text" class="form-control mb10" placeholder="Nama Sarana" name="lainnya_sarana['+yl+']"></input></div><div class="col-sm-4"><input type="text" class="form-control mb10 numb" name="lainnya_unit['+yl+']" placeholder="Unit"></div><div class="col-sm-4"><div class="input-group add-on"><input group-field="lainnya'+yl+'" placeholder="Kapasitas" class="form-control" name="lainnya_kg['+yl+']" type="text"><div class="input-group-btn"><button class="btn btn-default" onclick="removeInputLainnya('+yl+')"><i class="ico ico-remove"></i></button></div></div></div></div>';$("#formLainnya").append(t),yl++}function removeInputLainnya(t){var a="#inputLainnya"+t;$("#formLainnya "+a).remove()}function scrollTo(t){location.hash="#"+t}function clearInput(t){$("input:checked").removeAttr("checked"),$("input[type=text]").attr("value",""),$("[data-toggle=modal]").addClass("disabled"),$("."+t).trigger("reset")}$(document).ready(function(){var t=1;$("#form-multi-produk").on("submit",function(){var a=0,n={},e=[],i=[],r=$("#form-multi-produk .nama_produk").find("option:selected").val();0==validate_not_empty(r)?(alert("nama produk harus dipilih"),a+=1):(n.id_produk=r,n.nama_produk=$("#form-multi-produk .nama_produk").find("option:selected").text());var o=$("#form-multi-produk .jenis_pengajuan").val();0==validate_not_empty(o)?(alert("jenis pengajuan harus dipilih"),a+=1):(1==o?nama_pengajuan="Baru":nama_pengajuan="Perpanjang",n.jenis_pengajuan=o,n.nama_pengajuan=nama_pengajuan);var u=$("#form-multi-produk .total_realisasi_produk").val();0==validate_not_empty(u)?(alert("total realisasi harus diisi"),a+=1):n.total_realisasi=u,$('#form-multi-produk input[name^="kota"]').each(function(){var t=$(this).val();0==validate_not_empty(t)?(alert("kota tujuan pemasaran harus dipilih"),a+=1):e.push(t)}),n.domestik=e,$('#form-multi-produk input[name^="negara"]').each(function(){var t=$(this).val();0==validate_not_empty(t)?(alert("negara tujuan pemasaran harus dipilih"),a+=1):i.push(t)}),n.negara=i;var d=[],l=[],p=[],s="";$('#form-multi-produk input[name^="t_asal"]').each(function(t){1==validate_not_empty($(this).val())&&d.push($(this).val())}),$('#form-multi-produk input[name^="t_jenis"]').each(function(t){1==validate_not_empty($(this).val())&&l.push($(this).val())}),$('#form-multi-produk input[name^="t_bentuk"]').each(function(t){1==validate_not_empty($(this).val())&&p.push($(this).val())}),$.each(d,function(t,a){s+=a+","+l[t]+","+p[t]+"<br/>"});var m=[],c=[],v=[],f="";$('#form-multi-produk input[name^="b_asal"]').each(function(t){1==validate_not_empty($(this).val())&&m.push($(this).val())}),$('#form-multi-produk input[name^="b_jenis"]').each(function(t){1==validate_not_empty($(this).val())&&c.push($(this).val())}),$('#form-multi-produk input[name^="b_bentuk"]').each(function(t){1==validate_not_empty($(this).val())&&v.push($(this).val())}),$.each(m,function(t,a){f+=a+","+c[t]+","+v[t]+"<br/>"});var y=[],g=[],b=[],k="";if($('#form-multi-produk input[name^="i_asal"]').each(function(t){1==validate_not_empty($(this).val())&&y.push($(this).val())}),$('#form-multi-produk input[name^="i_jenis"]').each(function(t){1==validate_not_empty($(this).val())&&g.push($(this).val())}),$('#form-multi-produk input[name^="i_bentuk"]').each(function(t){1==validate_not_empty($(this).val())&&b.push($(this).val())}),$.each(y,function(t,a){k+=a+","+g[t]+","+b[t]+"<br/>"}),0==a){var h='<input type="hidden" name="nama_produk[]" value="'+n.id_produk+'"><input type="hidden" name="jenis_pengajuan[]" value="'+n.jenis_pengajuan+'"><input type="hidden" name="total_realisasi_produk[]" value="'+n.total_realisasi+'"><input type="hidden" name="kota[]" value="'+n.domestik+'"><input type="hidden" name="negara[]" value="'+n.negara+'"><input type="hidden" name="t_asal[]" value="'+d+'"><input type="hidden" name="t_jenis[]" value="'+l+'"><input type="hidden" name="t_bentuk[]" value="'+p+'"><input type="hidden" name="b_asal[]" value="'+m+'"><input type="hidden" name="b_jenis[]" value="'+c+'"><input type="hidden" name="b_bentuk[]" value="'+v+'"><input type="hidden" name="i_asal[]" value="'+y+'"><input type="hidden" name="i_jenis[]" value="'+g+'"><input type="hidden" name="i_bentuk[]" value="'+b+'">';stringRealisasi=n.total_realisasi.toString();var _=stringRealisasi.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1."),j='<table class="table table-bordered"><tr><td><strong>Nama Produk</strong></td><td>'+n.nama_produk+"</td></tr><tr><td><strong>Jenis Pengajuan</strong></td><td>"+n.nama_pengajuan+"</td></tr><tr><td><strong>Realisasi Produk</strong></td><td>"+_+" Kg/tahun</td></tr></table>",I='<table class="table table-bordered"><tr><td><strong>Domestik</strong></td><td>'+n.domestik+"</td></tr><tr><td><strong>Mancanegara</strong></td><td>"+n.negara+"</td></tr></table>",x='<table class="table table-bordered"><tr><td><strong>Tangkapan</strong></td><td>'+s+"</td></tr><tr><td><strong>Budidaya</strong></td><td>"+f+"</td></tr><tr><td><strong>Import</strong></td><td>"+k+"</td></tr></table>",B='<tr style="background:#FAFAFA;border-bottom:1px solid #FDFDFD;" class="tbl-tr-'+t+'"><td style="border-right:1px solid #F1F1F1;vertical-align:top;"><a onclick="remove_table_produk('+t+')" class="btn btn-xs btn-danger"><i class="ico ico-remove"></i></a>'+h+'</td><td style="border-right:1px solid #F1F1F1;vertical-align:top;">'+j+'</td><td style="border-right:1px solid #F1F1F1;vertical-align:top;">'+I+'</td><td style="vertical-align:top;">'+x+"</td></tr>";return t+=1,console.log(B),$("#tbl-produk-container").append(B),$("#modalCreateSKP").modal("toggle"),!1}return!1}),$("input[type=file]").change(function(){var t=["pdf","doc","docx","jpg","jpeg"];if(-1==$.inArray($(this).val().split(".").pop().toLowerCase(),t)){notifError("File Tidak Sesuai","Hanya format .jpg .jpeg .pdf .doc & .docx yang diperbolehkan");var a=$(this).attr("name");return $(this).attr("value",""),$("input[for="+a+"]").attr("value",""),!1}var a=$(this).attr("name"),n=$(this).val();return $("input[for="+a+"]").attr("value",n),$("input[for="+a+"]").removeAttr("flag"),!0}),$("input[type=reset]").click(function(){$("input[for]").attr("value","")}),$(".form-create-skp").on("submit",function(t){$("select").filter(function(){return""==$.trim($(this).val())?(notifError("Input Gagal","Field "+$(this).attr("placeholder")+" Masih Kosong"),!1):void 0});var a=count_flag_prevent($("input[flag=prevent]"));return a?!0:!1}),$(".confirm-upi").on("submit",function(){return""!=$("select[name=jenis_upi]").val()&&""!=$("select[name=skala_upi]").val()?!0:(notifError("Peringatan!","Lengkapi Semua Pilihan Field"),!1)}),$(".upload-temuan").on("submit",function(t){var a=count_flag_prevent($("input[flag=prevent]"));return a?!0:!1}),$(".upload-skp-terbit").on("submit",function(t){var a=count_flag_prevent($("input[flag=prevent]"));return a?!0:!1})});var yk=1,yn=1,ytangkapan=1,ybud=1,yim=1,ysni=1,yl=1,prdk=1;
